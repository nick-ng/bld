import"../chunks/NZTpNUN0.js";import{o as Ht}from"../chunks/TiJ0aFaW.js";import{f as g,d as e,r as t,t as h,b as c,p as St,c as Tt,s as o,aX as Dt,g as s,q as X,o as Z,a as $}from"../chunks/BXsdZoRn.js";import{s as p}from"../chunks/tSrHTpot.js";import{i as L}from"../chunks/BSxnXCi7.js";import{e as x}from"../chunks/3SjX1xnl.js";import{s as W}from"../chunks/CxOf_kpF.js";import{s as It,a as at}from"../chunks/BBUCDAEd.js";import{p as Et}from"../chunks/CA4IiTv0.js";import{g as Nt,a as Bt,f as Qt,c as Xt}from"../chunks/9_MIyRC0.js";import{o as qt}from"../chunks/CMvIGskt.js";import{b as zt,i as Jt,l as kt,m as Kt}from"../chunks/BKtatTih.js";import{g as G,l as Ut}from"../chunks/BgK6pTgv.js";var Vt=g('<a class="p-0.5 uppercase"> </a>');function q(K,i){var D=Vt(),E=e(D,!0);t(D),h(()=>{W(D,"href",`/flash-cards?f=${i.letterPair}&t=${i.cardType}`),p(E,i.letterPair)}),c(K,D)}var Wt=g('<a class="my-1 block rounded border border-gray-600 px-2 py-1 dark:border-gray-300">Random</a>'),Yt=g('<tr><td class="p-1 text-center svelte-1wtjw5d"><div> </div> <div> </div> <!></td><td class="svelte-1wtjw5d"><div class="flex flex-row flex-wrap items-start justify-start p-0.5 font-mono leading-none"></div></td></tr>'),Zt=g('<tr><td class="p-1 text-center svelte-1wtjw5d"><div> </div> <div> </div></td><td class="svelte-1wtjw5d"><div class="flex flex-row flex-wrap items-start justify-start p-0.5 font-mono leading-none"></div></td></tr>'),$t=g('<table class="summary-tables block w-full lg:max-w-lg svelte-1wtjw5d"><thead><tr><th class="text-center svelte-1wtjw5d"> </th><th class="w-full text-left svelte-1wtjw5d">Letter Pairs</th></tr></thead><tbody><!><!></tbody></table>');function Ct(K,i){St(i,!0);let D=X(()=>i.missing[Math.floor(Math.random()*i.missing.length)]);var E=$t(),U=e(E),z=e(U),Y=e(z),A=e(Y);t(Y),Dt(),t(z),t(U);var y=o(U),J=e(y);{var N=u=>{var n=Yt(),k=e(n),S=e(k),M=e(S);t(S);var R=o(S,2),F=e(R);t(R);var B=o(R,2);{var Q=P=>{var I=Wt();h(()=>W(I,"href",`/flash-cards?t=${i.cardType}&f=${s(D)}`)),c(P,I)};L(B,P=>{i.missing.length>0&&P(Q)})}t(k);var O=o(k),H=e(O);x(H,20,()=>i.missing.toSorted(),P=>P,(P,I)=>{q(P,{get letterPair(){return I},get cardType(){return i.cardType}})}),t(H),t(O),t(n),h(()=>{p(M,`No ${i.tableType??""}s`),p(F,`(${i.missing.length??""}/${i.total??""})`)}),c(u,n)};L(J,u=>{i.missing.length>0&&u(N)})}var V=o(J);x(V,16,()=>Object.keys(i.confidences).toSorted((u,n)=>parseInt(u)-parseInt(n)).map(u=>parseInt(u)),u=>u,(u,n)=>{var k=Zt(),S=e(k),M=e(S),R=e(M,!0);t(M);var F=o(M,2),B=e(F);t(F),t(S);var Q=o(S),O=e(Q);x(O,20,()=>i.confidences[n].toSorted(),H=>H,(H,P)=>{q(H,{get letterPair(){return P},get cardType(){return i.cardType}})}),t(O),t(Q),t(k),h(()=>{p(R,n),p(B,`(${i.confidences[n].length??""}/${i.total??""})`)}),c(u,k)}),t(y),t(E),h(()=>p(A,`${i.tableType??""}. Confidence`)),c(K,E),Tt()}var Gt=g('<a class="p-0.5 uppercase"> </a>'),At=g('<tr><td class="p-1 text-right whitespace-nowrap svelte-1voojfc"> </td><td class="svelte-1voojfc"><div class="flex flex-row flex-wrap items-start justify-start p-0.5 font-mono leading-none"></div></td></tr>'),te=g('<span class="p-0.5"> </span>'),ee=g('<span class="p-0.5"> </span>'),re=g('<tr><td class="p-1 whitespace-nowrap svelte-1voojfc"> </td><td class="svelte-1voojfc"><div class="flex flex-row flex-wrap items-start justify-start p-0.5 font-mono leading-none"><!> <!></div></td></tr>'),ae=g('<span class="p-0.5"> </span>'),se=g('<a class="p-0.5 uppercase"> </a>'),le=g('<span class="dark: mx-0.5 bg-gray-800 p-0.5 text-black text-gray-100 dark:bg-white"> </span>'),oe=g('<a class="p-0.5 uppercase"> </a>'),ve=g('<span class="dark: mx-0.5 bg-gray-800 p-0.5 text-black text-gray-100 dark:bg-white"> </span>'),de=g('<tr><td class="p-1 font-mono whitespace-nowrap svelte-1voojfc"> </td><td class="svelte-1voojfc"><div class="flex flex-row flex-wrap items-start justify-start p-0.5 font-mono leading-none"></div></td></tr>'),ie=g('<tr><td class="p-1 font-mono whitespace-nowrap svelte-1voojfc"> </td><td class="svelte-1voojfc"><div class="flex flex-row flex-wrap items-start justify-start p-0.5 font-mono leading-none"></div></td></tr>'),ne=g('<div><div class="summary-grid mx-auto grid grid-cols-1 content-center items-start justify-center justify-items-center gap-2 lg:m-0 svelte-1voojfc"><table class="summary-tables block w-full lg:max-w-lg svelte-1voojfc"><thead><tr><th class="text-right svelte-1voojfc">Speed</th><th class="w-full text-left svelte-1voojfc">Letter Pairs</th></tr></thead><tbody></tbody></table> <table class="summary-tables block w-full lg:max-w-lg svelte-1voojfc"><thead><tr><td colspan="2" class="p-1 text-left svelte-1voojfc"> </td></tr><tr><th class="text-left whitespace-nowrap svelte-1voojfc">Deck</th><th class="w-full text-left whitespace-nowrap svelte-1voojfc">Letter Pairs</th></tr></thead><tbody><tr><td class="p-1 whitespace-nowrap svelte-1voojfc">Current</td><td class="svelte-1voojfc"><div class="flex flex-row flex-wrap items-start justify-start p-0.5 font-mono leading-none"><!> <!></div></td></tr><!><tr><td class="p-1 whitespace-nowrap svelte-1voojfc">Retired</td><td class="svelte-1voojfc"><div class="flex flex-row flex-wrap items-start justify-start p-0.5 font-mono leading-none"><!> <!></div></td></tr></tbody></table> <table class="quiz-history block w-full lg:max-w-lg svelte-1voojfc"><thead><tr><th class="w-full text-left whitespace-nowrap svelte-1voojfc">Drill History</th></tr></thead><tbody><tr><td class="svelte-1voojfc"><div class="flex flex-row flex-wrap items-start justify-start p-0.5 font-mono leading-none"></div></td></tr></tbody></table> <table class="quiz-history block w-full lg:max-w-lg svelte-1voojfc"><thead><tr><th class="w-full text-left whitespace-nowrap svelte-1voojfc">Quiz History</th></tr></thead><tbody><tr><td class="svelte-1voojfc"><div class="flex flex-row flex-wrap items-start justify-start p-0.5 font-mono leading-none"></div></td></tr></tbody></table> <!> <!> <table class="summary-tables block w-full lg:max-w-lg svelte-1voojfc"><thead><tr><th class="text-left svelte-1voojfc">Insert</th><th class="w-full text-left svelte-1voojfc">Letter Pairs</th></tr></thead><tbody></tbody></table> <table class="summary-tables block w-full lg:max-w-lg svelte-1voojfc"><thead><tr><th class="text-left svelte-1voojfc">Setup</th><th class="w-full text-left svelte-1voojfc">Letter Pairs</th></tr></thead><tbody></tbody></table></div></div>');function Pe(K,i){St(i,!0);const D=()=>at(qt,"$optionsStore",z),E=()=>at(Qt,"$flashCardStore",z),U=()=>at(Xt,"$flashCardStoreStatus",z),[z,Y]=It(),A=5*60*1e3;let y=Et.url.searchParams.get("t")||"corner",J=X(()=>D().flashCardTypes[y]),N=X(()=>Nt(y,E()).filter(r=>!zt(r.letterPair,s(J).bufferPiece)&&!Jt(r.letterPair,s(J).samePieces))),V=X(()=>s(N).filter(r=>{const{leitnerDeck:a}=G(r.tags);return a==="C"})),u=X(()=>s(N).filter(r=>{const{leitnerDeck:a}=G(r.tags);return a==="R"})),n=X(()=>Kt(s(N),s(J)));Ht(()=>{Date.now()-U().fetchEndMs>A&&Bt()});var k=ne(),S=e(k),M=e(S),R=o(e(M));x(R,23,()=>s(n).drillSpeedGroups,(r,a)=>`${a}-${r.seconds[0]}-${r.seconds[1]}`,(r,a)=>{var v=At(),_=e(v),w=e(_);t(_);var b=o(_),d=e(b);x(d,20,()=>s(a).letters,l=>l,(l,m)=>{var T=Gt(),C=e(T,!0);t(T),h(()=>{W(T,"href",`/flash-cards?f=${m}`),p(C,m)}),c(l,T)}),t(d),t(b),t(v),h((l,m)=>p(w,`${l??""} - ${m??""}s`),[()=>s(a).seconds[0].toFixed(1),()=>s(a).seconds[1].toFixed(1)]),c(r,v)}),t(R),t(M);var F=o(M,2),B=e(F),Q=e(B),O=e(Q),H=e(O);t(O),t(Q),Dt(),t(B);var P=o(B),I=e(P),st=o(e(I)),lt=e(st),ot=e(lt);x(ot,17,()=>s(V).toSorted((r,a)=>r.letterPair.localeCompare(a.letterPair,"en",{sensitivity:"base"})),r=>r.letterPair,(r,a)=>{q(r,{get letterPair(){return s(a).letterPair},get cardType(){return y}})});var Mt=o(ot,2);{var Lt=r=>{var a=te(),v=e(a);t(a),h(()=>p(v,`(${s(V).length??""})`)),c(r,a)};L(Mt,r=>{s(V).length>0&&r(Lt)})}t(lt),t(st),t(I);var vt=o(I);x(vt,16,()=>["0","1","2","3","4","5","6","7","8","9"],r=>r,(r,a)=>{const v=X(()=>s(N).filter(f=>{const{leitnerDeck:j}=G(f.tags);return j===a}).sort((f,j)=>f.letterPair.localeCompare(j.letterPair,"en",{sensitivity:"base"})));var _=re(),w=e(_),b=e(w,!0);t(w);var d=o(w),l=e(d),m=e(l);x(m,17,()=>s(v),f=>f.letterPair,(f,j)=>{q(f,{get letterPair(){return s(j).letterPair},get cardType(){return y}})});var T=o(m,2);{var C=f=>{var j=ee(),Ot=e(j);t(j),h(()=>p(Ot,`(${s(v).length??""})`)),c(f,j)};L(T,f=>{s(v).length>0&&f(C)})}t(l),t(d),t(_),h(f=>p(b,f),[()=>Ut[a]?.join("-")]),c(r,_)});var dt=o(vt),it=o(e(dt)),nt=e(it),ct=e(nt);x(ct,17,()=>s(u).toSorted((r,a)=>r.letterPair.localeCompare(a.letterPair,"en",{sensitivity:"base"})),r=>r.letterPair,(r,a)=>{q(r,{get letterPair(){return s(a).letterPair},get cardType(){return y}})});var Rt=o(ct,2);{var Ft=r=>{var a=ae(),v=e(a);t(a),h(()=>p(v,`(${s(u).length??""})`)),c(r,a)};L(Rt,r=>{s(u).length>0&&r(Ft)})}t(nt),t(it),t(dt),t(P),t(F);var tt=o(F,2),ft=o(e(tt)),_t=e(ft),mt=e(_t),pt=e(mt);x(pt,21,()=>s(n).drillAges,r=>r.letterPair,(r,a)=>{var v=Z(),_=$(v);{var w=d=>{var l=se(),m=e(l,!0);t(l),h(()=>{W(l,"href",`/flash-cards?f=${s(a).letterPair}`),p(m,s(a).letterPair)}),c(d,l)},b=d=>{var l=Z(),m=$(l);{var T=C=>{var f=le(),j=e(f,!0);t(f),h(()=>p(j,s(a).letterPair)),c(C,f)};L(m,C=>{s(a).hidden||C(T)},!0)}c(d,l)};L(_,d=>{s(a).isMarker?d(b,!1):d(w)})}c(r,v)}),t(pt),t(mt),t(_t),t(ft),t(tt);var et=o(tt,2),ht=o(e(et)),gt=e(ht),ut=e(gt),xt=e(ut);x(xt,21,()=>s(n).quizAges,r=>r.letterPair,(r,a)=>{var v=Z(),_=$(v);{var w=d=>{var l=oe(),m=e(l,!0);t(l),h(()=>{W(l,"href",`/flash-cards?f=${s(a).letterPair}`),p(m,s(a).letterPair)}),c(d,l)},b=d=>{var l=Z(),m=$(l);{var T=C=>{var f=ve(),j=e(f,!0);t(f),h(()=>p(j,s(a).letterPair)),c(C,f)};L(m,C=>{s(a).hidden||C(T)},!0)}c(d,l)};L(_,d=>{s(a).isMarker?d(b,!1):d(w)})}c(r,v)}),t(xt),t(ut),t(gt),t(ht),t(et);var bt=o(et,2);Ct(bt,{tableType:"Comm",get missing(){return s(n).missingComms},get cardType(){return y},get confidences(){return s(n).commConfidences},get total(){return s(n).total}});var yt=o(bt,2);Ct(yt,{tableType:"Memo",get missing(){return s(n).missingMemos},get cardType(){return y},get confidences(){return s(n).memoConfidences},get total(){return s(n).total}});var rt=o(yt,2),wt=o(e(rt));x(wt,20,()=>Object.keys(s(n).inserts).toSorted(kt),r=>r,(r,a)=>{var v=de(),_=e(v),w=e(_,!0);t(_);var b=o(_),d=e(b);x(d,20,()=>s(n).inserts[a].toSorted(),l=>l,(l,m)=>{q(l,{get letterPair(){return m},get cardType(){return y}})}),t(d),t(b),t(v),h(()=>p(w,a)),c(r,v)}),t(wt),t(rt);var jt=o(rt,2),Pt=o(e(jt));x(Pt,20,()=>Object.keys(s(n).setups).toSorted(kt),r=>r,(r,a)=>{var v=ie(),_=e(v),w=e(_,!0);t(_);var b=o(_),d=e(b);x(d,20,()=>s(n).setups[a].toSorted(),l=>l,(l,m)=>{q(l,{get letterPair(){return m},get cardType(){return y}})}),t(d),t(b),t(v),h(()=>p(w,a)),c(r,v)}),t(Pt),t(jt),t(S),t(k),h(r=>p(H,`Next Session: ${(D().flashCardTypes[y].leitnerSession||0)??""}, Cards
						in Decks: ${r??""}, Retired Cards: ${s(u).length??""}`),[()=>s(N).filter(r=>{const{leitnerDeck:a}=G(r.tags);return a!=="S"&&a!=="R"}).length]),c(K,k),Tt(),Y()}export{Pe as component};
