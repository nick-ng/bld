import{f as p,a as m}from"../chunks/ChvGfjHK.js";import"../chunks/bNN_fS-Q.js";import{o as re}from"../chunks/Bk01Ho5O.js";import{p as H,c as u,r as n,s as h,g as r,aM as d,t as x,a as J,b as I,n as te,P as T}from"../chunks/C5K1Yg5B.js";import{s as A}from"../chunks/CliCnMxv.js";import{i as ae}from"../chunks/DaHJMf7G.js";import{e as C}from"../chunks/BVS0q2To.js";import{s as O,r as V,a as se}from"../chunks/Bqkc9qf9.js";import{s as E}from"../chunks/DcH0Rxn3.js";import{d as le,a as D}from"../chunks/Co33GQ6k.js";import{c as ie}from"../chunks/i5w7oQmI.js";import{b as oe}from"../chunks/D8pj6tNt.js";import{b as fe}from"../chunks/_bAq7S1v.js";import{s as ne,a as K,b as ce}from"../chunks/Bwczmf3X.js";import{r as de,g as ue}from"../chunks/ChY-GE9O.js";import{p as P}from"../chunks/B5WL_Ogo.js";import{g as N}from"../chunks/WMr84jBD.js";import{l as ve}from"../chunks/DH80SLoI.js";import{o as q}from"../chunks/CZvxKhKB.js";import{i as U,g as me,b as w}from"../chunks/B_Hhx7_u.js";import{s as pe}from"../chunks/CfrceTM-.js";import{L as ge}from"../chunks/C_7VeXfQ.js";var be=p('<div class="block flex-1 rounded-full"></div>'),he=p('<a><div> </div> <div class="flex h-2 flex-row justify-center gap-0.5 px-0.5 pb-0.5"></div></a>');function _e(y,o){H(o,!0);let l=d(()=>U(o.letterPair.speffz_pair,o.selectedBuffers)),S=d(()=>[r(l)&&!o.letterPair.words?"#ff0000ff":"#ffffff00",r(l)&&!o.selectedBuffers.every(f=>!me(o.letterPair.speffz_pair,f)||o.letterPair.algorithms[f]?.moves)?"#00aa00ff":"#ffffff00",r(l)&&!o.letterPair.image?"#0000ffff":"#ffffff00"]);var v=he(),_=u(v),z=u(_,!0);n(_);var c=h(_,2);C(c,23,()=>r(S),(f,i)=>`${i}-${f}`,(f,i)=>{var g=be();x(()=>pe(g,`background-color: ${r(i)};}`)),m(f,g)}),n(c),n(v),x((f,i)=>{E(v,1,`relative  border p-0 text-center ${!r(l)&&o.letterPair.is_public?"underline":"no-underline"} ${r(l)?"block border-gray-800":"hidden cursor-not-allowed border-gray-500 bg-gray-500 lg:block"}`),O(v,"href",f),E(_,1,`mb-1 p-0 leading-none uppercase ${r(l)?"":"text-gray-500"}`),A(z,i)},[()=>`?f=${o.letterPair.speffz_pair.toUpperCase()}`,()=>o.letterPair.speffz_pair.toUpperCase()]),m(y,v),J()}var Pe=p('<label class="block"><input type="checkbox"/> </label>'),xe=p('<div class="w-prose max-w-full"> </div>'),ye=p('<div class="flex w-68 flex-col justify-between rounded border border-gray-300 dark:border-gray-500"><!> <a class="block self-stretch border-t border-gray-300 text-center dark:border-gray-500">Edit</a></div>'),ke=p('<div class="flashCards lg:min-w-120 svelte-u8o8be"></div>'),we=p("<div></div>"),Se=p('<div class="m-auto lg:w-min"><div class="mb-1 flex flex-row items-center gap-2"><div class="flex min-w-1/2 flex-row"><input class="shrink grow" type="text" autocomplete="off" placeholder="Filter"/><button class="inline-block" type="button">Clear</button></div> <details class="relative"><summary>Buffers</summary> <div class="absolute top-full left-0 z-1 border border-gray-600 bg-white p-1"></div></details> <div class="grow-1"></div></div> <!></div>');function Be(y,o){H(o,!0);const l=()=>K(q,"$optionsStore",v),S=()=>K(ve,"$letterPairStore",v),[v,_]=ne(),z=(()=>{const e=[];for(let t=0;t<24;t++)for(let s=0;s<24;s++){const a=`${String.fromCharCode(97+t)}${String.fromCharCode(97+s)}`;e.push(a)}return e})();let c=d(()=>P.url.searchParams.get("f")||""),f=d(()=>null),i=d(()=>{const e=r(c).toLowerCase().replaceAll(/[^a-z ]/g," ").replaceAll(/[yz]/g,"x");if(e.length===2)return e[0]===e[1]?[e]:[e,`${e[1]}${e[0]}`];if(e.includes(" ")){const t=e.split(" ").filter(a=>a),s=[];for(let a=0;a<t.length;a++)switch(t[a].length){case 1:{s.push(`${t[a]}${t[a]}`);break}case 2:{s.push(t[a]);break}default:s.push(...t[a].split(""))}return s}return e.split("")}),g=d(()=>r(c)&&r(i).every(e=>e.length===2)?r(i).filter(e=>U(e,w(l().visibleBuffers))):z.filter(e=>r(i).length<1?!0:r(i).length===1&&r(i)[0]!==e[0]||!e.includes(r(i)[0])||r(i).length>1&&!r(i).includes(e[1])?!1:U(e,w(l().visibleBuffers))));re(()=>{const e=t=>{t.key===":"&&(r(f)?.focus(),r(f)?.select())};return document.addEventListener("keypress",e),()=>{document.removeEventListener("keypress",e)}});var $=Se(),F=u($),L=u(F),B=u(L);V(B),fe(B,e=>I(f,e),()=>r(f));var Q=h(B);n(L);var j=h(L,2),M=h(u(j),2);C(M,5,()=>w(l().chosenBuffers),e=>e,(e,t)=>{var s=Pe(),a=u(s);V(a);var k=h(a);n(s),x(()=>{se(a,l().visibleBuffers[r(t)]),A(k,` ${r(t)??""}`)}),D("change",a,b=>{ce(q,T(l).visibleBuffers[r(t)]=b.currentTarget.checked,T(l))}),m(e,s)}),n(M),n(j),te(2),n(F);var R=h(F,2);{var W=e=>{var t=xe(),s=u(t);n(t),x(()=>A(s,`No flash cards match the filter "${r(c)??""}"`)),m(e,t)},X=e=>{var t=ke();C(t,23,()=>r(g),(s,a)=>`${s}-${a}`,(s,a)=>{const k=d(()=>S()[r(a)]||{...N(r(a)),algorithms:{}});var b=ye(),G=u(b);{let ee=d(()=>w(l().visibleBuffers));ge(G,{get letterPair(){return r(k)},get selectedBuffers(){return r(ee)}})}var Z=h(G,2);n(b),x(()=>O(Z,"href",`/letter-pair/edit?sp=${r(a)}`)),m(s,b)}),n(t),m(e,t)},Y=e=>{var t=we();C(t,23,()=>r(g),(s,a)=>`${s}-${a}`,(s,a)=>{const k=d(()=>S()[r(a)]||{...N(r(a)),algorithms:{}});{let b=d(()=>w(l().visibleBuffers));_e(s,{get letterPair(){return r(k)},get selectedBuffers(){return r(b)}})}}),n(t),x(s=>E(t,1,s,"svelte-u8o8be"),[()=>ie(["letterPairGrid",!r(c)&&"letterPairGridColumns"].filter(s=>s).join(" "))]),m(e,t)};ae(R,e=>{r(g).length===0?e(W):r(g).length<=25?e(X,1):e(Y,!1)})}n($),oe(B,()=>r(c),e=>{I(c,e.replaceAll(/,/g," ").replaceAll(/[^a-z ()]/gi,"").replaceAll(/ +/g," ").toUpperCase()),P.url.searchParams.set("f",r(c)),de(`/?${P.url.searchParams.toString()}`,P.state)}),D("click",Q,()=>{P.url.searchParams.delete("f"),ue(`/?${P.url.searchParams.toString()}`)}),m(y,$),J(),_()}le(["click","change"]);function Re(y){Be(y,{})}export{Re as component};
