import{f as h,a as m,c as X}from"../chunks/ChvGfjHK.js";import{o as Y}from"../chunks/Bk01Ho5O.js";import{k as Z,a2 as tt,p as I,c as n,s as u,r as i,n as at,g as p,ad as F,t as G,P as a,b as M,a as H,f as O,F as et,aO as st,aM as z,az as rt}from"../chunks/C5K1Yg5B.js";import{d as J,e as ot,a as K}from"../chunks/Co33GQ6k.js";import{i as P}from"../chunks/DaHJMf7G.js";import{B as nt}from"../chunks/Dg6IlYQg.js";import{h as it}from"../chunks/orLAHixk.js";import{c as lt}from"../chunks/i5w7oQmI.js";import{s as dt}from"../chunks/DcH0Rxn3.js";import{a as Q,b as d,s as V}from"../chunks/Bwczmf3X.js";import{p as D}from"../chunks/B5WL_Ogo.js";import{a as o,p as ct}from"../chunks/C1NMoMnH.js";import{s as ut}from"../chunks/CliCnMxv.js";import{r as q}from"../chunks/Bqkc9qf9.js";import{b as C}from"../chunks/D8pj6tNt.js";import{a as pt,j as mt}from"../chunks/B_Hhx7_u.js";function vt(y,b,...t){var A=new nt(y);Z(()=>{const v=b()??null;A.ensure(v,v&&(f=>v(f,...t)))},tt)}const ft="auto",gt=!1,Dt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ft,ssr:gt},Symbol.toStringTag,{value:"Module"}));var ht=h("<p> </p>"),bt=h('<form class="text-center"><table class="border-separate border-spacing-2"><tbody><tr><td class="text-right"><label for="homepageUsername">Username:</label></td><td><input type="text" autocomplete="off" id="homepageUsername" name="username"/></td></tr><tr><td class="text-right"><label for="homepagePassword">Password:</label></td><td><input type="password" id="homepagePassword" name="password"/></td></tr><tr></tr></tbody></table> <div class="flex flex-row gap-2"><button type="button">Guest</button> <button>Login</button></div> <!></form>');function _t(y,b){I(b,!0);const t=()=>Q(o,"$authenticationStore",A),[A,v]=V();let f=F(""),_=F(""),w=F("");var g=bt(),k=n(g),$=n(k),S=n($),x=u(n(S)),T=n(x);q(T),i(x),i(S);var U=u(S),B=u(n(U)),e=n(B);q(e),i(B),i(U),at(),i($),i(k);var r=u(k,2),c=n(r),E=u(c,2);i(r);var R=u(r,2);{var j=s=>{var l=ht(),L=n(l,!0);i(l),G(()=>ut(L,p(w))),m(s,l)};P(R,s=>{p(w)&&s(j)})}i(g),G(()=>{T.disabled=t().isAuthenticating,e.disabled=t().isAuthenticating,c.disabled=t().isAuthenticating,E.disabled=t().isAuthenticating}),ot("submit",g,s=>{s.preventDefault(),!t().isAuthenticating&&(d(o,a(t).username=p(f),a(t)),d(o,a(t).password=p(_),a(t)),d(o,a(t).isAuthenticating=!0,a(t)),pt(mt("/login"),{method:"POST"}).then(l=>{if(l.ok){const L=l.headers.get("x-access-token"),N=ct(L);L&&N&&o.update(W=>({...W,accessToken:L,accessTokenExpiry:N,isUserAuthenticated:!0,isAuthenticating:!1}))}else M(w,"Invalid login"),M(_,""),d(o,a(t).isAuthenticating=!1,a(t))}))}),C(T,()=>p(f),s=>M(f,s)),C(e,()=>p(_),s=>M(_,s)),K("click",c,()=>{d(o,a(t).isUserAuthenticated=!1,a(t)),d(o,a(t).isGuest=!0,a(t))}),m(y,g),H(),v()}J(["click"]);var wt=h('<a class="like-button grow lg:grow-0" href="/quiz"><span class="hidden lg:inline">Study</span><span class="lg:hidden">ğŸ“</span></a>'),kt=h('<button><span class="hidden lg:inline">Logout</span><span class="lg:hidden">ğŸ”’</span></button>'),xt=h('<div class="m-1 flex flex-row items-start gap-2"><a class="like-button grow lg:grow-0" href="/"><span class="hidden lg:inline">Browse</span><span class="lg:hidden">ğŸ“–</span></a> <!> <a class="like-button hidden lg:inline" href="/mbld/scramble">MBLD Scrambles</a> <a class="like-button hidden lg:inline" href="/mbld/analyse">MBLD Analyse</a> <div class="grow-0 lg:grow"></div> <a class="like-button grow lg:grow-0" href="/settings"><span class="hidden lg:inline">Settings</span><span class="lg:hidden">âš™ï¸</span></a> <!></div>'),yt=h('<div class="mx-auto max-w-prose"><h2>Login</h2> <!></div>'),At=h("<!> <div><!></div>",1);function qt(y,b){I(b,!0);const t=()=>Q(o,"$authenticationStore",A),[A,v]=V(),f=["big-scramble","clock","52"],_=["/big-scramble","/clock","/mbld/scramble","/mbld/analyse","/52"];let w=z(()=>f.every(e=>D.route.id!==`/${e}`)),g=z(()=>!t().isUserAuthenticated&&!t().isGuest&&!_.includes(D.route.id||""));Y(()=>{});var k=At();it("12qhfyh",e=>{et(()=>{st.title="Blindfolded Cube Resources"})});var $=O(k);{var S=e=>{var r=xt(),c=u(n(r),2);{var E=s=>{var l=wt();m(s,l)};P(c,s=>{t().isUserAuthenticated&&s(E)})}var R=u(c,10);{var j=s=>{var l=kt();K("click",l,()=>{d(o,a(t).isUserAuthenticated=!1,a(t)),d(o,a(t).isGuest=!1,a(t)),d(o,a(t).username="",a(t)),d(o,a(t).password="",a(t)),d(o,a(t).accessToken="",a(t))}),m(s,l)};P(R,s=>{p(g)||s(j)})}i(r),m(e,r)};P($,e=>{p(w)&&e(S)})}var x=u($,2),T=n(x);{var U=e=>{var r=yt(),c=u(n(r),2);_t(c,{}),i(r),m(e,r)},B=e=>{var r=X(),c=O(r);vt(c,()=>b.children??rt),m(e,r)};P(T,e=>{p(g)?e(U):e(B,!1)})}i(x),G(()=>dt(x,1,lt(p(w)?"mx-1":""))),m(y,k),H(),v()}J(["click"]);export{qt as component,Dt as universal};
