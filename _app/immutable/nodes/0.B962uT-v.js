import"../chunks/NZTpNUN0.js";import{o as V}from"../chunks/TiJ0aFaW.js";import{p as X,f as h,d as n,s as m,r as l,aX as W,g as d,af as z,t as F,x as t,e as G,b as f,c as H,a as D,b0 as Y,q as B,o as Z,n as tt}from"../chunks/BXsdZoRn.js";import{d as J,e as et}from"../chunks/DW_c6W7d.js";import{s as at,a as st}from"../chunks/tSrHTpot.js";import{i as C}from"../chunks/BSxnXCi7.js";import{s as rt}from"../chunks/CO-QVM2N.js";import{r as I,s as ot}from"../chunks/CxOf_kpF.js";import{s as it}from"../chunks/DKWmIzXd.js";import{c as nt}from"../chunks/i5w7oQmI.js";import{a as E,b as u,s as K}from"../chunks/BBUCDAEd.js";import{p as N}from"../chunks/CA4IiTv0.js";import{o as lt}from"../chunks/CMvIGskt.js";import{a as o,p as dt}from"../chunks/BeaE2lM_.js";import{b as R}from"../chunks/PBRzJq_N.js";import{a as ct,j as ut}from"../chunks/BKtatTih.js";const mt="auto",pt=!1,Et=Object.freeze(Object.defineProperty({__proto__:null,prerender:mt,ssr:pt},Symbol.toStringTag,{value:"Module"}));var vt=(x,e)=>{u(o,t(e).isGuest=!0,t(e))},ft=h("<p> </p>"),bt=h('<form class="text-center"><table class="border-separate border-spacing-2"><tbody><tr><td class="text-right"><label for="homepageUsername">Username:</label></td><td><input type="text" autocomplete="off" id="homepageUsername" name="username"/></td></tr><tr><td class="text-right"><label for="homepagePassword">Password:</label></td><td><input type="password" id="homepagePassword" name="password"/></td></tr><tr></tr></tbody></table> <div class="flex flex-row gap-2"><button type="button">Guest</button> <button>Login</button></div> <!></form>');function _t(x,e){X(e,!0);const s=()=>E(o,"$authenticationStore",k),[k,L]=K();let y=z(""),p=z(""),w=z("");var v=bt(),b=n(v),A=n(b),T=n(A),_=m(n(T)),$=n(_);I($),l(_),l(T);var S=m(T),j=m(n(S)),a=n(j);I(a),l(j),l(S),W(),l(A),l(b);var r=m(b,2),c=n(r);c.__click=[vt,s];var O=m(c,2);l(r);var q=m(r,2);{var P=i=>{var g=ft(),U=n(g,!0);l(g),F(()=>at(U,d(w))),f(i,g)};C(q,i=>{d(w)&&i(P)})}l(v),F(()=>{$.disabled=s().isAuthenticating,a.disabled=s().isAuthenticating,c.disabled=s().isAuthenticating,O.disabled=s().isAuthenticating}),et("submit",v,i=>{i.preventDefault(),!s().isAuthenticating&&(u(o,t(s).username=d(y),t(s)),u(o,t(s).password=d(p),t(s)),u(o,t(s).isAuthenticating=!0,t(s)),ct(ut("/login"),{method:"POST"}).then(g=>{if(g.ok){const U=g.headers.get("x-access-token"),M=dt(U);U&&M&&o.update(Q=>({...Q,accessToken:U,accessTokenExpiry:M,isUserAuthenticated:!0,isAuthenticating:!1}))}else G(w,"Invalid login"),G(p,""),u(o,t(s).isAuthenticating=!1,t(s))}))}),R($,()=>d(y),i=>G(y,i)),R(a,()=>d(p),i=>G(p,i)),f(x,v),H(),L()}J(["click"]);var gt=(x,e)=>{u(o,t(e).isUserAuthenticated=!1,t(e)),u(o,t(e).isGuest=!1,t(e)),u(o,t(e).username="",t(e)),u(o,t(e).password="",t(e)),u(o,t(e).accessToken="",t(e))},ht=h("<button>Logout</button>"),xt=h('<div class="m-1 flex flex-row items-start gap-2"><a class="like-button">Browse</a> <a class="like-button" href="/quiz">Study</a> <a class="like-button" href="/flash-cards/summary">Stats</a> <div class="grow"></div> <a class="like-button" href="/settings">Settings</a> <!></div>'),kt=h('<div class="mx-auto max-w-prose"><h2>Login</h2> <!></div>'),yt=h("<!> <div><!></div>",1);function Mt(x,e){X(e,!0);const s=()=>E(lt,"$optionsStore",L),k=()=>E(o,"$authenticationStore",L),[L,y]=K();let p=B(()=>["big-scramble","clock"].every(a=>N.route.id!==`/${a}`)),w=B(()=>N.url.searchParams.get("t")||s().defaultFlashCardType),v=B(()=>!k().isUserAuthenticated&&!k().isGuest);V(()=>{});var b=yt();st(a=>{Y.title="Blindfolded Cube Resources"});var A=D(b);{var T=a=>{var r=xt(),c=n(r),O=m(c,10);{var q=P=>{var i=ht();i.__click=[gt,k],f(P,i)};C(O,P=>{d(v)||P(q)})}l(r),F(()=>ot(c,"href",`/flash-cards?t=${d(w)}`)),f(a,r)};C(A,a=>{d(p)&&a(T)})}var _=m(A,2),$=n(_);{var S=a=>{var r=kt(),c=m(n(r),2);_t(c,{}),l(r),f(a,r)},j=a=>{var r=Z(),c=D(r);rt(c,()=>e.children??tt),f(a,r)};C($,a=>{d(v)?a(S):a(j,!1)})}l(_),F(()=>it(_,1,nt(d(p)?"mx-1":""))),f(x,b),H(),y()}J(["click"]);export{Mt as component,Et as universal};
