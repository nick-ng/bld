import"./NZTpNUN0.js";import{p as rt,f as i,d as c,r as n,t as h,b as o,c as ot,g as t,o as ut,a as Z,q as L,s as x,aY as Pt,aX as ct}from"./BXsdZoRn.js";import{s as b}from"./tSrHTpot.js";import{i as _}from"./BSxnXCi7.js";import{e as et}from"./3SjX1xnl.js";import{s as at}from"./CxOf_kpF.js";import{s as st}from"./DKWmIzXd.js";import{d as Et}from"./DW_c6W7d.js";import{p as A}from"./CTUXWtyS.js";import{a as tt,s as It}from"./BBUCDAEd.js";import{j as zt,u as Tt,d as Ut,p as At}from"./BKtatTih.js";import{c as Ft,b as Wt,f as qt}from"./9_MIyRC0.js";import{o as Dt}from"./CMvIGskt.js";import{C as Lt}from"./BcZN5Ja3.js";import{s as Nt}from"./B4ZuMZme.js";import{c as Qt}from"./i5w7oQmI.js";var Mt=i('<div class="absolute top-0 right-0 bottom-0 left-0 m-auto flex flex-row items-center justify-center text-9xl leading-none break-keep"> </div>'),Bt=i('<div class="relative h-full flex-grow overflow-hidden"></div>'),Gt=i('<img class="flex-shrink object-contain"/>'),Rt=i('<span class="text-3xl">No Image</span>'),Xt=i("<div><!></div>");function Yt(N,a){rt(a,!0);let g=A(a,"imageUri",3,"");const f=2,F=10,I=l=>l.startsWith("blob:")||l.startsWith("/")?l:zt("images",l),B=l=>l.replace(/\.emoji$/,"").split(":").map((r,m,j)=>{const v=r.split("");let u="",d=0,p=0,C=0,P=0,q=0;for(let z=0;z<v.length;z++){const R=v[z];switch(R){case"+":{d=d+F;break}case"-":{d=d-F;break}case"^":{p=p+f;break}case">":{P=P+f;break}case"v":{C=C+f;break}case"<":{q=q+f;break}default:u=`${u}${R}`}}return{emoji:u,sizeAdjustment:d,opacity:(j.length-m)/j.length,padding:[C,q,p,P].map(z=>`${z*f}px`).join(" ")}});var W=Xt(),G=c(W);{var H=l=>{var y=Bt();et(y,23,()=>B(g()),(r,m)=>`${m}-${r.emoji}-${r.padding}`,(r,m,j)=>{var v=Mt(),u=c(v,!0);n(v),h(d=>{Nt(v,d),b(u,t(m).emoji)},[()=>`z-index: ${B(g()).length-t(j)}; font-size: ${128+t(m).sizeAdjustment}px;opacity: ${t(m).opacity};padding: ${t(m).padding};`]),o(r,v)}),n(y),o(l,y)},J=l=>{var y=ut(),r=Z(y);{var m=v=>{var u=Gt();h(d=>{at(u,"src",d),at(u,"alt",a.alt)},[()=>I(g())]),o(v,u)},j=v=>{var u=Rt();o(v,u)};_(r,v=>{g()?v(m):v(j,!1)},!0)}o(l,y)};_(G,l=>{g().endsWith(".emoji")?l(H):l(J,!1)})}n(W),h(l=>st(W,1,l),[()=>`flex h-64 w-64 flex-row justify-center ${!g()||g().endsWith(".emoji")?"items-center":"items-stretch"}`]),o(N,W),ot()}var Zt=i("<span> </span>");function ft(N,a){rt(a,!0);let g=L(()=>[a.cancellationType==="cancelled"&&"underline text-emerald-700 dark:text-emerald-500",a.cancellationType==="gone"&&"line-through text-blue-700 dark:text-blue-500"].filter(I=>I).join(" "));var f=Zt(),F=c(f,!0);n(f),h(()=>{st(f,1,Qt(t(g))),b(F,a.move)}),o(N,f),ot()}var Ht=i('<div class="text-center"> </div>'),Jt=i('<div class="absolute top-0 left-0 text-left"> </div>'),Kt=i('<button class="cannot-hover:py-2 absolute top-0 right-0 block rounded border border-gray-600 px-2 py-0 dark:border-gray-300">End Quiz</button>'),Ot=i('<a class="cannot-hover:py-2 absolute top-0 right-0 block rounded border border-gray-600 px-2 py-0 uppercase dark:border-gray-300"> </a>'),Vt=i('<div class="max-w-64 truncate text-center text-2xl"> </div>'),$t=i(" <!>",1),te=i(" <!>",1),ee=i('<div class="mt-2 text-center leading-none text-balance"></div>'),ae=i('<details><summary class="text-center"> </summary> <div class="mt-2 text-center leading-none text-balance"></div> <!></details>'),re=i("<span>No Commutator</span>"),oe=i('<div class="text-xl"><!></div>'),se=i('<div><div class="m-0 flex flex-row justify-center self-stretch"><h2 class="m-0 uppercase"><!> </h2></div> <!> <!> <!> <!> <!> <!></div>'),ie=i('<div class="mx-auto max-w-prose"><!></div>');function ke(N,a){rt(a,!0);const g=()=>tt(qt,"$flashCardStore",I),f=()=>tt(Ft,"$flashCardStoreStatus",I),F=()=>tt(Dt,"$optionsStore",I),[I,B]=It();let W=A(a,"letterPair",3,""),G=A(a,"quizLeft",3,0),H=A(a,"showCorners",3,!0),J=A(a,"extraClass",3,""),l=A(a,"showInverseLink",3,!1),y=A(a,"flashCardType",3,"corner"),r=L(()=>Wt(W(),y(),g()));var m=ie(),j=c(m);{var v=d=>{var p=Ht(),C=c(p,!0);n(p),h(P=>b(C,P),[()=>Tt(f().message)]),o(d,p)},u=d=>{var p=se(),C=c(p),P=c(C),q=c(P);{var z=e=>{var s=Pt("ðŸ‘€");o(e,s)};_(q,e=>{(a.showMemo||a.showImage)&&a.showCommutator&&t(r).isPublic&&F().isUserAuthenticated&&e(z)})}var R=x(q);n(P),n(C);var it=x(C,2);{var _t=e=>{var s=Jt(),k=c(s);n(s),h(()=>b(k,`${G()??""} left`)),o(e,s)};_(it,e=>{G()>0&&e(_t)})}var lt=x(it,2);{var pt=e=>{var s=Kt();s.__click=function(...k){a.onQuizEnd?.apply(this,k)},o(e,s)},ht=e=>{var s=ut(),k=Z(s);{var K=Q=>{const w=L(()=>`${t(r).letterPair[1]}${t(r).letterPair[0]}`);var S=Ot(),D=c(S,!0);n(S),h(()=>{at(S,"href",`/flash-cards?t=${t(r).type}&f=${t(w)}`),b(D,t(w))}),o(Q,S)};_(k,Q=>{l()&&t(r).letterPair.length===2&&t(r).letterPair[0]!==t(r).letterPair[1]&&Q(K)},!0)}o(e,s)};_(lt,e=>{typeof a.onQuizEnd=="function"?e(pt):e(ht,!1)})}var nt=x(lt,2);{var gt=e=>{Lt(e,{get letterPair(){return t(r).letterPair}})};_(nt,e=>{H()&&e(gt)})}var vt=x(nt,2);{var xt=e=>{var s=Vt(),k=c(s,!0);n(s),h(()=>b(k,t(r).memo)),o(e,s)};_(vt,e=>{a.showMemo&&e(xt)})}var dt=x(vt,2);{var bt=e=>{var s=oe(),k=c(s);{var K=w=>{const S=L(()=>At(t(r).commutator)),D=L(()=>Ut(t(S).expansion));var O=ae(),V=c(O),kt=c(V,!0);n(V);var $=x(V,2);et($,23,()=>t(D).original,(T,E)=>`${T.move}${E}`,(T,E,M)=>{ct();var U=$t(),X=Z(U,!0),Y=x(X);ft(Y,{get move(){return t(E).move},get cancellationType(){return t(E).type}}),h(()=>b(X,t(M)>0?" ":"")),o(T,U)}),n($);var wt=x($,2);{var St=T=>{var E=ee();et(E,23,()=>t(D).simplified,(M,U)=>`${M.move}${U}`,(M,U,X)=>{ct();var Y=te(),mt=Z(Y,!0),jt=x(mt);ft(jt,{get move(){return t(U).move},get cancellationType(){return t(U).type}}),h(()=>b(mt,t(X)>0?" ":"")),o(M,Y)}),n(E),o(T,E)};_(wt,T=>{t(D).originalCount>t(D).simplifiedCount&&T(St)})}n(O),h(()=>b(kt,t(S).normalisedCommutator)),o(w,O)},Q=w=>{var S=re();o(w,S)};_(k,w=>{t(r).commutator?w(K):w(Q,!1)})}n(s),o(e,s)};_(dt,e=>{a.showCommutator&&e(bt)})}var yt=x(dt,2);{var Ct=e=>{{let s=L(()=>`${t(r).letterPair.toUpperCase()} visualisation`);Yt(e,{get imageUri(){return t(r).image},get alt(){return t(s)}})}};_(yt,e=>{a.showImage&&e(Ct)})}n(p),h(()=>{st(p,1,`relative flex flex-col items-center gap-1 ${J()}`),b(R,` ${t(r).letterPair??""}`)}),o(d,p)};_(j,d=>{f().status!=="loaded"?d(v):d(u,!1)})}n(m),o(N,m),ot(),B()}Et(["click"]);export{ke as F,Yt as I,ft as S};
