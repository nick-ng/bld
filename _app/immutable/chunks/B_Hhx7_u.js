import{A as B,U as y,P as b,a as E,b as M}from"./CEuvCyUC.js";import{o as T}from"./CZvxKhKB.js";const U=["ðŸ‘","ðŸ‘Ž"],F={a:"UBL",b:"UBR",c:"UFR",d:"UFL",e:"LUB",f:"LUF",g:"LDF",h:"LDB",i:"FUL",j:"FUR",k:"FDR",l:"FDL",m:"RUF",n:"RUB",o:"RDB",p:"RDF",q:"BUR",r:"BUL",s:"BDL",t:"BDR",u:"DFL",v:"DFR",w:"DBR",x:"DBL",y:"DBL",z:"DBL",UBL:"a",UBR:"b",UFR:"c",UFL:"d",LUB:"e",LUF:"f",LDF:"g",LDB:"h",FUL:"i",FUR:"j",FDR:"k",FDL:"l",RUF:"m",RUB:"n",RDB:"o",RDF:"p",BUR:"q",BUL:"r",BDL:"s",BDR:"t",DFL:"u",DFR:"v",DBR:"w",DBL:"x"},D={a:"UB",b:"UR",c:"UF",d:"UL",e:"LU",f:"LF",g:"LD",h:"LB",i:"FU",j:"FR",k:"FD",l:"FL",m:"RU",n:"RB",o:"RD",p:"RF",q:"BU",r:"BL",s:"BD",t:"BR",u:"DF",v:"DR",w:"DB",x:"DL",y:"DL",z:"DL",UB:"a",UR:"b",UF:"c",UL:"d",LU:"e",LF:"f",LD:"g",LB:"h",FU:"i",FR:"j",FD:"k",FL:"l",RU:"m",RB:"n",RD:"o",RF:"p",BU:"q",BL:"r",BD:"s",BR:"t",DF:"u",DR:"v",DB:"w",DL:"x"};function G(e){return Object.keys(e).filter(t=>e[t])}function k(...e){return e.map((t,n)=>{if(typeof t!="string")return"";let s=t.replace(/\/+$/,"");return n!==0&&(s=s.replace(/^\/+/,"")),s}).filter(t=>t.length>0).join("/")}function z(...e){return k("https://bld-server.pux.one",...e)}function H(e){if(e.length===0)return"";const[t,...n]=e.split("");return[t.toLocaleUpperCase(),...n].join("")}function W(e){const t=e?new Headers(e):new Headers,n=localStorage.getItem(B),s=localStorage.getItem(y),a=localStorage.getItem(b);return!s||!a?{headers:t,isValid:!1,previousAccessToken:null}:(n&&t.append("x-access-token",n),t.append("x-username",s),t.append("x-password",a),{headers:t,isValid:!0,previousAccessToken:n})}const C=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function K(e){const t=C[e.getDay()],n=e.getDate(),s=x[e.getMonth()],a=e.getHours(),u=e.getMinutes();return`${t}, ${n} ${s} ${e.getFullYear()} ${a}:${u.toString().padStart(2,"0")}`}function q(e){if(e>1e3*60*60*24){const t=Math.round(e/864e5);return`${t} day${t===1?"":"s"}`}if(e>1e3*60*60){const t=Math.round(e/36e5);return`${t} hour${t===1?"":"s"}`}if(e>1e3*60){const t=Math.round(e/6e4);return`${t} minute${t===1?"":"s"}`}if(e>1e3){const t=Math.round(e/1e3);return`${t} second${t===1?"":"s"}`}return`${e} millisecond${e===1?"":"s"}`}function J(e,t){const n={...t},{headers:s,isValid:a,previousAccessToken:u}=W(t?.headers);a&&(n.headers=s);const m=fetch(e,{mode:"cors",...n});return m.then(i=>{if(i.ok){T.update(r=>({...r,isUserAuthenticated:!0}));const c=i.headers.get("X-Access-Token");c&&u!==c&&localStorage.setItem(B,c)}return i}),m}function v(e){if(e.toUpperCase()===e){if(e.length===3)return{isValid:!0,name:"corner",bufferSpeffz:F[e],samePieces:E,speffzLocationMap:F};if(e.length===2)return{isValid:!0,name:"edge",bufferSpeffz:D[e],samePieces:M,speffzLocationMap:D}}return{isValid:!1}}function L(e,t){const n=e.split("").sort().join(""),s=t.split("").sort().join("");return n===s}function A(e,t){if(e.length!==2)return!1;const n=v(t);if(!n.isValid)return!1;const s=n.speffzLocationMap[e[0]],a=n.speffzLocationMap[e[1]];return L(t,s)||L(t,a)?!1:e[0]===e[1]?!0:!L(s,a)}function N(e,t){return t.length===0?!0:t.some(n=>A(e,n))}function Y(){return navigator.userAgent.includes("Win")?"win":navigator.userAgent.includes("Mac")?"mac":""}function h(e){return e.replaceAll(/  +/g," ").replaceAll(/ *([ufrdlb])/gi," $1").replaceAll(/ *\[ */g,"[").replaceAll(/ *\] */g,"]").replaceAll(/ *, */g,",").replaceAll(/ *: */g,":").replaceAll(/ *\/ */g,"/").trim()}function g(e){const t=e.split(" ").filter(n=>n).reverse();for(let n=0;n<t.length;n++)t[n].includes("2")||(t[n].includes("'")?t[n]=t[n].replaceAll("'",""):t[n]=`${t[n]}'`);return t.join(" ")}const I="R U R' F' R U R' U' R' F R2 U' R' U'",P="R U R' U' R' F R2 U' R' U' R U R' F'",$="R' F R2 U' R' U' R U R' F' R U R' U'",S="L' U' L F L' U' L U L F' L2 U L U",_=`F ${$} F'`;function w(e){return e.replaceAll(/<jb-perm>/gi,I).replaceAll(/<op-swap>/gi,$).replaceAll(/<left jb-perm>/gi,S).replaceAll(/<ljb-perm>/gi,S).replaceAll(/<t-perm>/gi,P).replaceAll(/<y-perm>/gi,_)}function Z(e){const t=w(e),n=e!==t;let s="";for(let i=0;i<U.length;i++)if(t.includes(U[i])){s=`${U[i]} `;break}const a=t.match(/\[[ufrdlb2' ]+,[ufrdlb2' ]+\]/i);if(a){const i=h(a[0]);let c=i;const r=t.match(/[ufrdlb2' ]+: ?\[[ufrdlb2' ]+,[ufrdlb2' ]+\]/i);let o="";r&&(c=h(r[0]),o=c.split(":")[0].trim());const l=i.replaceAll("[","").replaceAll("]","").split(",").map(p=>p.trim());let f=l[0],d=l[1];return l[0].match(/^[ufrdlb][2']*$/i)&&(d=l[0],f=l[1]),c[0]!=="["&&(c=`[${c}]`),{rawCommutator:e,normalisedCommutator:n?e:c,commutator:i,conjugatePlusCommutator:c,setup:o,insert:f,insertLength:f.split(" ").length,interchange:d,regripEmoji:s,expansion:[o,l[0],l[1],g(l[0]),g(l[1]),g(o)].filter(p=>p).join(" ")}}const u=t.match(/(?<setupRG>[ufrdlb2' ]+:)? *(?<commutatorRG>\[[ufrdlb]'?\/[ufrdlb2' ]+\])/i);if(u){const{setupRG:i,commutatorRG:c}=u.groups||{},[r,o]=c.replaceAll("[","").replaceAll("]","").split("/"),l=r.trim(),f=`${l.replaceAll("'","")}2`,d=h(c),p=i?h(i.replaceAll(":","")):"";let R=d;return p&&(R=`[${p}:${d}]`),{rawCommutator:e,normalisedCommutator:n?e:R,commutator:d,conjugatePlusCommutator:R,setup:p,insert:o,insertLength:o.split(" ").length,interchange:f,expansion:[p,l,o,f,g(o),l,g(p)].filter(j=>j).join(" ")}}const m=t.match(/(?<setupRG>[ufrdlb2' ]+) *: *(?<algorithmRG>[ufrdlb2' ]+)/i);if(m){const{setupRG:i,algorithmRG:c}=m.groups||{},r=i?h(i):"",o=c?h(c):"";return{rawCommutator:e,normalisedCommutator:n?e:`[${r}:${o}]`,commutator:"",conjugatePlusCommutator:"",setup:r,insert:"",insertLength:0,interchange:"",expansion:[r,o,g(r)].filter(l=>l).join(" ")}}return{rawCommutator:e,normalisedCommutator:e,commutator:"",conjugatePlusCommutator:"",setup:"",insert:"",insertLength:0,interchange:"",expansion:t}}function X(e){const t=e.split(" ").filter(r=>r),n=t.map(r=>({move:r,type:"normal"})),s=[],a=t.map((r,o)=>({move:r,face:r.replaceAll("'","").replaceAll("2",""),amount:r.includes("'")?3:r.includes("2")?2:1,type:"normal",steps:[o]}));let u=a.map(r=>r.move).join(" "),m="";for(;m!==u;)m=u,a.sort((r,o)=>r.move.startsWith("U")&&o.move.startsWith("D")?-1:r.move.startsWith("D")&&o.move.startsWith("U")?1:r.move.startsWith("F")&&o.move.startsWith("B")?-1:r.move.startsWith("B")&&o.move.startsWith("F")?1:r.move.startsWith("R")&&o.move.startsWith("L")?-1:r.move.startsWith("L")&&o.move.startsWith("R")?1:0),u=a.map(r=>r.move).join(" ");a.forEach(r=>{if(s.length===0){s.push(r);return}let o=s.length-1;for(let l=s.length-1;l>=0;l--)if(s[l].amount!==0){o=l;break}if(s[o].face===r.face){s[o].amount=(s[o].amount+r.amount)%4,s[o].type="cancelled",s[o].steps.push(...r.steps);return}s.push(r)});const i=s.map(r=>{switch(r.type==="cancelled"&&r.steps.forEach(o=>{n[o].type="cancelled"}),r.amount){case 0:return r.steps.forEach(o=>{n[o].type="gone"}),{...r,move:""};case 1:return{...r,move:`${r.face}`};case 2:return{...r,move:`${r.face}2`};case 3:return{...r,move:`${r.face}'`};default:return console.warn("step",r),alert("Invalid move. See console for details"),{...r,move:""}}}).filter(r=>r.move),c=i.map(r=>r.move);return{original:n,simplified:i,simplifiedString:c.join(" "),originalCount:t.length,simplifiedCount:c.length}}function Q(e,t){if(!A(e,t))return null;const n=v(t);if(!n.isValid)return null;if(e[0]===e[1])return n.name==="edge"?null:`https://v2.blddb.net/parity?position=${`UF-UR-${t}-${n.speffzLocationMap[e[0]]}`}&mode=manmade`;const s=[t,...e.split("").map(a=>n.speffzLocationMap[a.toLowerCase()])].join("-");return`https://v2.blddb.net/${n.name}?position=${s}&mode=manmade`}const ee=e=>{const t=new URL(e);if(e.includes("youtube.com")){const n=t.searchParams.get("v");if(typeof n=="string")return{id:n,platform:"youtube"}}if(e.includes("youtu.be/")){const n=t.pathname.slice(1);if(n.length>0)return{id:n,platform:"youtube"}}return e.endsWith(".mp4")?{id:e,platform:"file"}:{id:e,platform:"unknown"}},te=e=>{const t=e.split(":");let n=0;switch(t.length){case 3:{const s=t.shift();s&&(n=n+parseInt(s,10)*3600)}case 2:{const s=t.shift();s&&(n=n+parseInt(s,10)*60)}case 1:{const s=t.shift();s&&(n=n+parseInt(s,10))}}return n},ne=e=>{const t=Math.floor(e/3600);let n=e%3600;const s=Math.floor(n/60);return n=n%60,t>0?[t.toString(),s.toString().padStart(2,"0"),n.toString().padStart(2,"0")].join(":"):s>0?[s.toString(),n.toString().padStart(2,"0")].join(":"):n.toString()};export{J as a,G as b,Y as c,ne as d,ee as e,K as f,Q as g,te as h,N as i,z as j,q as m,Z as p,X as s,H as u};
